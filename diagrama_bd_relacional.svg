<svg viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .table-box { fill: #ffffff; stroke: #2c3e50; stroke-width: 2; }
      .table-header { fill: #3498db; }
      .table-header-text { fill: white; font-weight: bold; font-size: 14px; }
      .field-text { font-size: 11px; fill: #2c3e50; }
      .pk { fill: #e74c3c; }
      .fk { fill: #f39c12; }
      .relation-line { stroke: #7f8c8d; stroke-width: 1.5; fill: none; }
      .relation-text { font-size: 10px; fill: #7f8c8d; }
    </style>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#7f8c8d" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="700" y="25" text-anchor="middle" font-size="20" font-weight="bold" fill="#2c3e50">
    Base de Datos Relacional - Sistema Koma Zano
  </text>
  
  <!-- Empresas Table -->
  <g id="empresas">
    <rect class="table-box" x="50" y="60" width="180" height="100" rx="5"/>
    <rect class="table-header" x="50" y="60" width="180" height="30" rx="5"/>
    <text class="table-header-text" x="140" y="80" text-anchor="middle">EMPRESAS</text>
    <text class="field-text" x="60" y="105">ðŸ”‘ id_empresa (PK)</text>
    <text class="field-text" x="60" y="125">   nombre</text>
    <text class="field-text" x="60" y="145">   activo</text>
  </g>
  
  <!-- Ubicaciones Table -->
  <g id="ubicaciones">
    <rect class="table-box" x="50" y="200" width="180" height="140" rx="5"/>
    <rect class="table-header" x="50" y="200" width="180" height="30" rx="5"/>
    <text class="table-header-text" x="140" y="220" text-anchor="middle">UBICACIONES</text>
    <text class="field-text" x="60" y="245">ðŸ”‘ id_ubicacion (PK)</text>
    <text class="field-text" x="60" y="265">   departamento</text>
    <text class="field-text" x="60" y="285">   provincia</text>
    <text class="field-text" x="60" y="305">   distrito</text>
    <text class="field-text" x="60" y="325">   direccion</text>
  </g>
  
  <!-- Clientes Table -->
  <g id="clientes">
    <rect class="table-box" x="280" y="60" width="220" height="280" rx="5"/>
    <rect class="table-header" x="280" y="60" width="220" height="30" rx="5"/>
    <text class="table-header-text" x="390" y="80" text-anchor="middle">CLIENTES</text>
    <text class="field-text" x="290" y="105">ðŸ”‘ id_cliente (PK)</text>
    <text class="field-text" x="290" y="125">ðŸ”— id_ubicacion (FK)</text>
    <text class="field-text" x="290" y="145">   nombre_completo</text>
    <text class="field-text" x="290" y="165">   nombre_corto</text>
    <text class="field-text" x="290" y="185">   dni</text>
    <text class="field-text" x="290" y="205">   celular</text>
    <text class="field-text" x="290" y="225">   email</text>
    <text class="field-text" x="290" y="245">   cumpleanos</text>
    <text class="field-text" x="290" y="265">   origen</text>
    <text class="field-text" x="290" y="285">   sub_origen</text>
    <text class="field-text" x="290" y="305">   comentario_google</text>
    <text class="field-text" x="290" y="325">   fecha_registro</text>
  </g>
  
  <!-- Productos Table -->
  <g id="productos">
    <rect class="table-box" x="550" y="60" width="220" height="280" rx="5"/>
    <rect class="table-header" x="550" y="60" width="220" height="30" rx="5"/>
    <text class="table-header-text" x="660" y="80" text-anchor="middle">PRODUCTOS</text>
    <text class="field-text" x="560" y="105">ðŸ”‘ id_producto (PK)</text>
    <text class="field-text" x="560" y="125">   nombre</text>
    <text class="field-text" x="560" y="145">   marca</text>
    <text class="field-text" x="560" y="165">   categoria</text>
    <text class="field-text" x="560" y="185">   sub_categoria</text>
    <text class="field-text" x="560" y="205">   sku</text>
    <text class="field-text" x="560" y="225">   codigo_ean13</text>
    <text class="field-text" x="560" y="245">   cantidad_presentacion</text>
    <text class="field-text" x="560" y="265">   abreviatura</text>
    <text class="field-text" x="560" y="285">   costo_prima_sin_igv</text>
    <text class="field-text" x="560" y="305">   precio_venta_base</text>
    <text class="field-text" x="560" y="325">   estado</text>
  </g>
  
  <!-- Ventas Table -->
  <g id="ventas">
    <rect class="table-box" x="820" y="60" width="220" height="240" rx="5"/>
    <rect class="table-header" x="820" y="60" width="220" height="30" rx="5"/>
    <text class="table-header-text" x="930" y="80" text-anchor="middle">VENTAS</text>
    <text class="field-text" x="830" y="105">ðŸ”‘ id_venta (PK)</text>
    <text class="field-text" x="830" y="125">ðŸ”— id_empresa (FK)</text>
    <text class="field-text" x="830" y="145">ðŸ”— id_cliente (FK)</text>
    <text class="field-text" x="830" y="165">ðŸ”— id_vendedor (FK)</text>
    <text class="field-text" x="830" y="185">   fecha_entrega</text>
    <text class="field-text" x="830" y="205">   segmento</text>
    <text class="field-text" x="830" y="225">   estado_entrega</text>
    <text class="field-text" x="830" y="245">   estado_pago</text>
    <text class="field-text" x="830" y="265">   total_venta</text>
    <text class="field-text" x="830" y="285">   ganancia_neta</text>
  </g>
  
  <!-- Detalle Ventas Table -->
  <g id="detalle_ventas">
    <rect class="table-box" x="820" y="340" width="220" height="180" rx="5"/>
    <rect class="table-header" x="820" y="340" width="220" height="30" rx="5"/>
    <text class="table-header-text" x="930" y="360" text-anchor="middle">DETALLE_VENTAS</text>
    <text class="field-text" x="830" y="385">ðŸ”‘ id_detalle (PK)</text>
    <text class="field-text" x="830" y="405">ðŸ”— id_venta (FK)</text>
    <text class="field-text" x="830" y="425">ðŸ”— id_producto (FK)</text>
    <text class="field-text" x="830" y="445">   cantidad</text>
    <text class="field-text" x="830" y="465">   precio_unitario</text>
    <text class="field-text" x="830" y="485">   descuento</text>
    <text class="field-text" x="830" y="505">   precio_total</text>
  </g>
  
  <!-- Deliveries Table -->
  <g id="deliveries">
    <rect class="table-box" x="1090" y="60" width="220" height="240" rx="5"/>
    <rect class="table-header" x="1090" y="60" width="220" height="30" rx="5"/>
    <text class="table-header-text" x="1200" y="80" text-anchor="middle">DELIVERIES</text>
    <text class="field-text" x="1100" y="105">ðŸ”‘ id_delivery (PK)</text>
    <text class="field-text" x="1100" y="125">ðŸ”— id_venta (FK)</text>
    <text class="field-text" x="1100" y="145">ðŸ”— id_ubicacion (FK)</text>
    <text class="field-text" x="1100" y="165">   empresa_delivery</text>
    <text class="field-text" x="1100" y="185">   fecha_envio</text>
    <text class="field-text" x="1100" y="205">   costo_delivery</text>
    <text class="field-text" x="1100" y="225">   en_ruta</text>
    <text class="field-text" x="1100" y="245">   estado</text>
    <text class="field-text" x="1100" y="265">   fecha_pago</text>
    <text class="field-text" x="1100" y="285">   medio_pago</text>
  </g>
  
  <!-- Pagos Table -->
  <g id="pagos">
    <rect class="table-box" x="550" y="380" width="220" height="160" rx="5"/>
    <rect class="table-header" x="550" y="380" width="220" height="30" rx="5"/>
    <text class="table-header-text" x="660" y="400" text-anchor="middle">PAGOS</text>
    <text class="field-text" x="560" y="425">ðŸ”‘ id_pago (PK)</text>
    <text class="field-text" x="560" y="445">ðŸ”— id_venta (FK)</text>
    <text class="field-text" x="560" y="465">   fecha_pago</text>
    <text class="field-text" x="560" y="485">   medio_pago</text>
    <text class="field-text" x="560" y="505">   monto</text>
    <text class="field-text" x="560" y="525">   estado</text>
  </g>
  
  <!-- Comprobantes Table -->
  <g id="comprobantes">
    <rect class="table-box" x="280" y="380" width="220" height="160" rx="5"/>
    <rect class="table-header" x="280" y="380" width="220" height="30" rx="5"/>
    <text class="table-header-text" x="390" y="400" text-anchor="middle">COMPROBANTES</text>
    <text class="field-text" x="290" y="425">ðŸ”‘ id_comprobante (PK)</text>
    <text class="field-text" x="290" y="445">ðŸ”— id_venta (FK)</text>
    <text class="field-text" x="290" y="465">   numero_factura</text>
    <text class="field-text" x="290" y="485">   fecha_factura</text>
    <text class="field-text" x="290" y="505">   monto_facturado</text>
    <text class="field-text" x="290" y="525">   tipo_comprobante</text>
  </g>
  
  <!-- Gastos Table -->
  <g id="gastos">
    <rect class="table-box" x="50" y="380" width="180" height="240" rx="5"/>
    <rect class="table-header" x="50" y="380" width="180" height="30" rx="5"/>
    <text class="table-header-text" x="140" y="400" text-anchor="middle">GASTOS</text>
    <text class="field-text" x="60" y="425">ðŸ”‘ id_gasto (PK)</text>
    <text class="field-text" x="60" y="445">ðŸ”— id_empresa (FK)</text>
    <text class="field-text" x="60" y="465">ðŸ”— id_producto (FK)</text>
    <text class="field-text" x="60" y="485">   fecha_ingreso</text>
    <text class="field-text" x="60" y="505">   tipo</text>
    <text class="field-text" x="60" y="525">   cantidad</text>
    <text class="field-text" x="60" y="545">   costo_unitario</text>
    <text class="field-text" x="60" y="565">   costo_total</text>
    <text class="field-text" x="60" y="585">   estado_pago</text>
    <text class="field-text" x="60" y="605">   medio_pago</text>
  </g>
  
  <!-- Vendedores Table -->
  <g id="vendedores">
    <rect class="table-box" x="1090" y="340" width="180" height="120" rx="5"/>
    <rect class="table-header" x="1090" y="340" width="180" height="30" rx="5"/>
    <text class="table-header-text" x="1180" y="360" text-anchor="middle">VENDEDORES</text>
    <text class="field-text" x="1100" y="385">ðŸ”‘ id_vendedor (PK)</text>
    <text class="field-text" x="1100" y="405">ðŸ”— id_empresa (FK)</text>
    <text class="field-text" x="1100" y="425">   nombre_completo</text>
    <text class="field-text" x="1100" y="445">   activo</text>
  </g>
  
  <!-- Relations -->
  <!-- Clientes -> Ubicaciones -->
  <path class="relation-line" d="M 280,200 L 230,200" marker-end="url(#arrow)"/>
  <text class="relation-text" x="250" y="195">1:N</text>
  
  <!-- Ventas -> Empresas -->
  <path class="relation-line" d="M 820,100 L 230,100" marker-end="url(#arrow)"/>
  <text class="relation-text" x="520" y="95">1:N</text>
  
  <!-- Ventas -> Clientes -->
  <path class="relation-line" d="M 820,180 L 500,180" marker-end="url(#arrow)"/>
  <text class="relation-text" x="660" y="175">1:N</text>
  
  <!-- Ventas -> Vendedores -->
  <path class="relation-line" d="M 1040,170 L 1090,380" marker-end="url(#arrow)"/>
  <text class="relation-text" x="1050" y="270">1:N</text>
  
  <!-- Detalle Ventas -> Ventas -->
  <path class="relation-line" d="M 930,340 L 930,300" marker-end="url(#arrow)"/>
  <text class="relation-text" x="940" y="320">1:N</text>
  
  <!-- Detalle Ventas -> Productos -->
  <path class="relation-line" d="M 820,440 L 660,340" marker-end="url(#arrow)"/>
  <text class="relation-text" x="730" y="380">1:N</text>
  
  <!-- Deliveries -> Ventas -->
  <path class="relation-line" d="M 1090,170 L 1040,170" marker-end="url(#arrow)"/>
  <text class="relation-text" x="1050" y="165">1:1</text>
  
  <!-- Deliveries -> Ubicaciones -->
  <path class="relation-line" d="M 1090,200 Q 600,200 230,270" marker-end="url(#arrow)"/>
  <text class="relation-text" x="650" y="190">1:N</text>
  
  <!-- Pagos -> Ventas -->
  <path class="relation-line" d="M 660,380 L 930,300" marker-end="url(#arrow)"/>
  <text class="relation-text" x="790" y="340">1:N</text>
  
  <!-- Comprobantes -> Ventas -->
  <path class="relation-line" d="M 390,380 L 860,300" marker-end="url(#arrow)"/>
  <text class="relation-text" x="620" y="340">1:N</text>
  
  <!-- Gastos -> Empresas -->
  <path class="relation-line" d="M 140,380 L 140,160" marker-end="url(#arrow)"/>
  <text class="relation-text" x="150" y="270">1:N</text>
  
  <!-- Gastos -> Productos -->
  <path class="relation-line" d="M 230,500 L 550,250" marker-end="url(#arrow)"/>
  <text class="relation-text" x="380" y="370">1:N</text>
  
  <!-- Vendedores -> Empresas -->
  <path class="relation-line" d="M 1180,340 Q 1180,100 230,100" marker-end="url(#arrow)"/>
  <text class="relation-text" x="700" y="80">1:N</text>
  
  <!-- Legend -->
  <g id="legend">
    <rect x="50" y="680" width="280" height="120" fill="#f8f9fa" stroke="#dee2e6" stroke-width="1" rx="5"/>
    <text x="190" y="700" text-anchor="middle" font-size="14" font-weight="bold" fill="#2c3e50">Leyenda</text>
    <text x="60" y="725" font-size="11" fill="#2c3e50">ðŸ”‘ PK = Primary Key (Clave Primaria)</text>
    <text x="60" y="745" font-size="11" fill="#2c3e50">ðŸ”— FK = Foreign Key (Clave ForÃ¡nea)</text>
    <text x="60" y="765" font-size="11" fill="#2c3e50">1:N = RelaciÃ³n uno a muchos</text>
    <text x="60" y="785" font-size="11" fill="#2c3e50">1:1 = RelaciÃ³n uno a uno</text>
  </g>
  
  <!-- Notes -->
  <g id="notes">
    <rect x="380" y="680" width="600" height="220" fill="#fff3cd" stroke="#ffc107" stroke-width="2" rx="5"/>
    <text x="680" y="700" text-anchor="middle" font-size="14" font-weight="bold" fill="#856404">Mejoras Implementadas</text>
    
    <text x="390" y="725" font-size="11" fill="#856404">âœ“ NormalizaciÃ³n 3NF: EliminaciÃ³n de redundancia de datos</text>
    <text x="390" y="745" font-size="11" fill="#856404">âœ“ Integridad referencial: Relaciones FK garantizan consistencia</text>
    <text x="390" y="765" font-size="11" fill="#856404">âœ“ SeparaciÃ³n de conceptos: Ventas, Deliveries y Pagos independientes</text>
    <text x="390" y="785" font-size="11" fill="#856404">âœ“ Ubicaciones normalizadas: Departamento/Provincia/Distrito en tabla Ãºnica</text>
    <text x="390" y="805" font-size="11" fill="#856404">âœ“ Productos centralizados: CatÃ¡logo maestro con precios base</text>
    <text x="390" y="825" font-size="11" fill="#856404">âœ“ Detalle de ventas: SeparaciÃ³n de lÃ­nea de venta por producto</text>
    <text x="390" y="845" font-size="11" fill="#856404">âœ“ Comprobantes y Pagos: Control financiero independiente</text>
    <text x="390" y="865" font-size="11" fill="#856404">âœ“ Vendedores: GestiÃ³n de personal por empresa</text>
    <text x="390" y="885" font-size="11" fill="#856404">âœ“ Gastos trazables: VinculaciÃ³n con productos y empresas</text>
  </g>
  
  <text x="700" y="970" text-anchor="middle" font-size="12" fill="#7f8c8d" font-style="italic">
    Base de datos relacional normalizada - Preparada para PostgreSQL, MySQL o SQL Server
  </text>
</svg>